2+2
library(tidymodels)
library(tidyverse)
library(lubridate)
library(httr)
library(jsonlite)
library(tidymodels)
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("lubridate")
install.packages("httr")
install.packages("tidyverse")
library(tidyverse)
library(lubridate)
library(httr)
library(jsonlite)
library(tidymodels)
r_insp <- GET("https://opendata.arcgis.com/datasets/ebe3ae7f76954fad81411612d7c4fb17_1.geojson")
inspections <- content(r_insp, "text") %>%
fromJSON() %>%
.$features %>%
.$properties %>%
as_tibble()
inspections_clean <- inspections %>%
mutate(date = ymd_hms(DATE_) %>% as.Date()) %>%
select(-c(DATE_, DESCRIPTION, OBJECTID))
restauraunts <- content(r_rest, "text") %>%
fromJSON() %>%
.$features %>%
.$properties %>%
as_tibble() %>%
select(-OBJECTID)
restauraunts <- restauraunts %>%
mutate(RESTAURANTOPENDATE = ymd_hms(RESTAURANTOPENDATE) %>% as.Date())
r_rest <- GET("https://opendata.arcgis.com/datasets/124c2187da8c41c59bde04fa67eb2872_0.geojson") #json
restauraunts <- content(r_rest, "text") %>%
fromJSON() %>%
.$features %>%
.$properties %>%
as_tibble() %>%
select(-OBJECTID)
restauraunts <- restauraunts %>%
mutate(RESTAURANTOPENDATE = ymd_hms(RESTAURANTOPENDATE) %>% as.Date())
inspections_restaurants <- inspections_clean %>%
left_join(restauraunts, by = c("HSISID", "PERMITID")) %>%
filter(SCORE > 50, FACILITYTYPE == "Restaurant") %>%
distinct(HSISID, date, .keep_all = TRUE) %>%
select(-c(FACILITYTYPE, PERMITID)) %>%
select(-c(NAME, contains("ADDRESS"), CITY, STATE, POSTALCODE, PHONENUMBER, X, Y, GEOCODESTATUS))
inspections_restaurants %>%
glimpse()
data_time_feats <- inspections_restaurants %>%
arrange(date) %>%
mutate(SCORE_yr_overall = slider::slide_index_dbl(SCORE,
.i = date,
.f = mean,
na.rm = TRUE,
.before = lubridate::days(365),
.after = -lubridate::days(1))
) %>%
group_by(HSISID) %>%
mutate(SCORE_lag = lag(SCORE),
SCORE_recent = slider::slide_index_dbl(SCORE,
date,
mean,
na.rm = TRUE,
.before = lubridate::days(365*3),
.after = -lubridate::days(1),
.complete = FALSE),
days_since_open = (date - RESTAURANTOPENDATE) / ddays(1),
days_since_last = (date - lag(date)) / ddays(1)) %>%
ungroup() %>%
arrange(date)
library(slider)
install.packages("slider")
library(slider)
library(slider)
data_time_feats <- inspections_restaurants %>%
arrange(date) %>%
mutate(SCORE_yr_overall = slider::slide_index_dbl(SCORE,
.i = date,
.f = mean,
na.rm = TRUE,
.before = lubridate::days(365),
.after = -lubridate::days(1))
) %>%
group_by(HSISID) %>%
mutate(SCORE_lag = lag(SCORE),
SCORE_recent = slider::slide_index_dbl(SCORE,
date,
mean,
na.rm = TRUE,
.before = lubridate::days(365*3),
.after = -lubridate::days(1),
.complete = FALSE),
days_since_open = (date - RESTAURANTOPENDATE) / ddays(1),
days_since_last = (date - lag(date)) / ddays(1)) %>%
ungroup() %>%
arrange(date)
data_time_feats
install.packages("tm")
library(shiny); runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/application')
runApp('Downloads/YMseekA-overnight-visualization-feature-Sai-31009751 4/Iteration-1/Visualization/Dashboard/1.5')
runApp('Downloads/YMseekA-overnight-visualization-feature-Sai-31009751 4/Iteration-1/Visualization/Dashboard/1.5')
install.packages("conflicted")
runApp('Downloads/YMseekA-overnight-visualization-feature-Sai-31009751 4/Iteration-1/Visualization/Dashboard/1.5')
runApp('Downloads/YMseekA-overnight-visualization-feature-Sai-31009751 4/Iteration-1/Visualization/Dashboard/1.5')
options(encoding = "UTF-8")
runApp('Downloads/YMseekA-overnight-visualization-feature-Sai-31009751 4/Iteration-1/Visualization/Dashboard/1.5')
options(encoding = "UTF-8")
deployApp()
options(encoding = "UTF-8")
deployApp
deployApp()
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/application')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Downloads/visualisation project/data/Visual1.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
library(shiny); runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
install.packages("shinyjs")
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
runApp('Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health/drug_mh_shiny_app.R')
colnames(benzo_presc[,3:10])
alcohol_consumption = read.csv("alcohol_consumption.csv")
benzo_presc = read.csv("benzodiazepines_prescription.csv")
drug_avail = read.csv("drug_availability.csv")
drug_use_st = read.csv("drug_use_state_data.csv")
drug_source = read.csv("drugs_source.csv")
missing_work_drugs = read.csv("missing_work_drugs.csv")
opioids_presc = read.csv("opioids_prescritpion.csv")
setwd()
getwd("/Users/uditarora/Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health")
setwd("/Users/uditarora/Documents/GitHub/YMseekA/Iteration-1/Visualization/Drugs_mental_health")
alcohol_consumption = read.csv("alcohol_consumption.csv")
benzo_presc = read.csv("benzodiazepines_prescription.csv")
drug_avail = read.csv("drug_availability.csv")
drug_use_st = read.csv("drug_use_state_data.csv")
drug_source = read.csv("drugs_source.csv")
missing_work_drugs = read.csv("missing_work_drugs.csv")
opioids_presc = read.csv("opioids_prescritpion.csv")
colnames(benzo_presc[,3:10])
sub('X', '', colnames(benzo_presc[,3:10]))
runApp('drug_mh_shiny_app.R')
runApp('application')
